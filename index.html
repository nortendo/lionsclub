<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lions Club La Louvi√®re - Relais pour la Vie</title>
  <style>
    * { box-sizing: border-box; }
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu; background: linear-gradient(135deg,#ff7e5f,#6a82fb); min-height:100vh; }
    .container { max-width: 1100px; margin: 20px auto; background: #fff; border-radius: 14px; box-shadow: 0 18px 40px rgba(0,0,0,.12); overflow:hidden; }
    header { padding: 28px; text-align:center; color:#fff; background: linear-gradient(45deg,#ff6b6b,#ffa500); }
    header h1 { margin:0 0 6px; font-size: 2.1rem; text-shadow: 0 2px 8px rgba(0,0,0,.25); }
    header p { margin:0; opacity:.95; }
    .tabs { display:flex; gap:0; background:#f1f3f5; }
    .tab { flex:1; padding:14px 18px; text-align:center; border:none; background:transparent; font-weight:600; color:#6c757d; cursor:pointer; }
    .tab.active { background:#fff; border-bottom:3px solid #ff7e5f; color:#212529; }
    .content { padding: 24px; }
    .tab-content { display:none; }
    .tab-content.active { display:block; }
    .tshirt-grid { display:grid; grid-template-columns: repeat(auto-fit,minmax(280px,1fr)); gap:14px; }
    .member-card { background:#f8f9fa; border:2px solid #e9ecef; border-radius:12px; padding:14px; }
    .member-name { font-weight:700; margin-bottom:8px; color:#343a40; }
    .size-buttons { display:flex; flex-wrap:wrap; gap:6px; }
    .size-btn { padding:6px 10px; border:2px solid #dee2e6; background:#fff; border-radius:999px; font-weight:700; cursor:pointer; min-width:44px; }
    .size-btn.selected { background:#ff6b6b; color:#fff; border-color:#ff6b6b; }
    .toolbar { display:flex; gap:10px; align-items:center; margin-bottom:10px; }
    .member-select { padding:6px 8px; border:1px solid #ced4da; border-radius:8px; }
    .schedule-container { background:#f8f9fa; border-radius:12px; padding:14px; margin-bottom:12px; }
    .day-header { background: linear-gradient(45deg,#667eea,#764ba2); color:#fff; padding:10px 12px; border-radius:10px; margin-bottom:10px; font-weight:800; text-align:center; }
    .time-slots { display:grid; grid-template-columns: repeat(auto-fit,minmax(240px,1fr)); gap:10px; }
    .time-slot { background:#fff; border:2px solid #dee2e6; border-radius:10px; padding:10px; }
    .time-slot.assigned { background:#e6ffed; border-color:#2ecc71; }
    .time-range { font-weight:800; margin-bottom:6px; }
    .assigned-to { display:flex; flex-direction:column; gap:6px; }
    .chip { display:inline-flex; align-items:center; gap:6px; background:#20c997; color:#fff; border-radius:999px; padding:4px 8px; font-size:.9rem; }
    .chip button { width:20px; height:20px; border:none; border-radius:50%; background:rgba(0,0,0,.2); color:#fff; cursor:pointer; }
    .summary { background:linear-gradient(135deg,#28a745,#20c997); color:#fff; border-radius:12px; padding:16px; }
    .summary-grid { display:grid; grid-template-columns: repeat(auto-fit,minmax(150px,1fr)); gap:12px; margin-top:10px; }
    .summary-item { text-align:center; background:rgba(255,255,255,.12); padding:14px; border-radius:10px; }
    .summary-number { font-size:1.9rem; font-weight:900; }
    .submit-btn { background:linear-gradient(45deg,#007bff,#0056b3); color:#fff; border:none; border-radius:10px; padding:12px 16px; cursor:pointer; font-weight:800; }
    .toast { position:fixed; bottom:22px; right:22px; background:#212529; color:#fff; border-radius:10px; padding:10px 14px; box-shadow:0 10px 26px rgba(0,0,0,.25); opacity:0; transform:translateY(8px); transition:all .2s; }
    .toast.show { opacity:1; transform:translateY(0); }
    #errorBanner { display:none; margin:0 0 12px; padding:10px 14px; border-radius:10px; background:#fff3cd; border:1px solid #ffeeba; color:#5c4f00; font-weight:700; }
    #slotsModal { display:none; position:fixed; inset:0; background:rgba(0,0,0,.5); z-index:1000; align-items:center; justify-content:center; }
    #slotsModal .panel { background:#fff; border-radius:12px; padding:18px; max-width:720px; width:92%; max-height:80vh; overflow:auto; }
    #slotsList button { width:100%; text-align:left; border:none; padding:8px 10px; border-radius:8px; background:#e9ecef; cursor:pointer; margin:4px 0; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>üö∂‚Äç‚ôÇÔ∏è Lions Club La Louvi√®re - Relais pour la Vie</h1>
      <p>La Louvi√®re ‚Ä¢ 11‚Äì12 Octobre 2025</p>
    </header>

    <div id="errorBanner"></div>

    <div class="tabs">
      <button class="tab active" onclick="switchTab(event,'tshirts')">üëï Tailles T-Shirts</button>
      <button class="tab" onclick="switchTab(event,'planning')">‚è∞ Planning Marche</button>
      <button class="tab" onclick="switchTab(event,'resume')">üìä R√©sum√©</button>
    </div>

    <div class="content">
      <div id="tshirts" class="tab-content active">
        <h2>S√©lection des tailles de t-shirts</h2>
        <div id="tshirtGrid" class="tshirt-grid"></div>
      </div>

      <div id="planning" class="tab-content">
        <div class="toolbar">
          <label for="filterMember">Filtrer par membre :</label>
          <select id="filterMember" class="member-select" onchange="createSchedule()">
            <option value="">-- Tous les membres --</option>
          </select>
        </div>
        <h2>Planning des cr√©neaux (max 2 personnes / cr√©neau)</h2>
        <div id="scheduleContainer"></div>
      </div>

      <div id="resume" class="tab-content">
        <div class="summary">
          <h3>üìà R√©sum√©</h3>
          <div class="summary-grid">
            <div class="summary-item"><div class="summary-number" id="totalMembers">0</div><div>Membres</div></div>
            <div class="summary-item"><div class="summary-number" id="tshirtsSelected">0</div><div>T-shirts s√©lectionn√©s</div></div>
            <div class="summary-item"><div class="summary-number" id="slotsAssigned">0</div><div>Cr√©neaux assign√©s</div></div>
            <div class="summary-item"><div class="summary-number" id="slotsFree">0</div><div>Cr√©neaux libres</div></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Ici tu ins√®res le m√™me script qu‚Äôon a boss√© ensemble :
    // - fetchState depuis Netlify Functions
    // - createTshirtGrid + selectSize
    // - createSchedule + assignSlot/removeAssignee
    // - updateSummary
    // - polling toutes les 12s
  </script>
</body>
</html>
